package lab.cgcl.requestClient.domain;

import java.util.ArrayList;
import java.util.Iterator;
import java.util.List;
import java.util.Map;

import lab.cgcl.dao.SqlDao;
import lab.cgcl.myOCR.util.BeanUtil;

public class BasicAccountPool extends AccountPool{
	
	private SqlDao dao ;

	public SqlDao getDao() {
		return dao;
	}

	public void setDao(SqlDao dao) {
		this.dao = dao;
	}
	
	public void BasicAccountPool (SqlDao d) {
		this.dao = d;
	}

	@Override
	public synchronized void accountInputStream() {
		
	}
	
	protected List getAccount (int offset ,  int num) {
		String sql = "select * from causer.user where used = 0 and points < 950  order by id limit" + offset + " , " + num;
		List ret = new ArrayList();
		try {
			List acc =  dao.list(sql);
			Iterator it = acc.iterator();
			while(it.hasNext()){
				CaUser user = BeanUtil.wrapMap2Bean( (Map)(it.next()), CaUser.class);
				ret.add(user);
			}
		} catch (Exception e) {
			// TODO Auto-generated catch block
			e.printStackTrace();
		}
		return ret;
	}

}
